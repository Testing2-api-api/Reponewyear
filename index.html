<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3x3 Envelope Grid</title>

<style>

* {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
}
body {
  margin: 0;
  background: #ffffff;
  font-family: "Noto Sans SC", "Microsoft YaHei", sans-serif;
  text-align: center;
}

h2 {
  margin-top: 30px;
}

/* GRID */
.grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;

  max-width: 900px;
  margin: 0 auto;
}

/* Mobile */
@media (max-width: 768px) {

  .grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;

    max-width: 100%;     /* bỏ 900px */
    padding: 0 16px;     /* padding 2 bên */
    margin: 0 auto;
  }

  .wrapper {
    display: flex;
    justify-content: center;   /* căn giữa từng phong thư */
  }

  .scene {
    width: 140px;
    height: 98px;
  }

}

/* lớp rung */
.wrapper {
  animation: shake 0.5s infinite linear;
}

/* scene chỉ giữ 3D */
.scene {
  width: 100%;
  aspect-ratio: 200 / 140;   /* giữ đúng tỉ lệ */
  perspective: 1000px;
}


/* envelope */
.envelope {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s ease-in-out;
  will-change: transform;
  cursor: pointer;
}

.envelope.open {
  transform: rotateY(180deg);
}

/* rung */
@keyframes shake {
  0%   { transform: rotateZ(-3deg); }
  50%  { transform: rotateZ(3deg); }
  100% { transform: rotateZ(-3deg); }
}

/* front & back */
.front, .back {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 12px;
  backface-visibility: hidden;
  padding: 20px;
  box-sizing: border-box;
}

.front {
  display: flex;
  justify-content: center;
  align-items: center;

  background-image: url("Images/envelop.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  font-weight: bold;
  font-size: 18px;
}

.back {
  background: white;
  transform: rotateY(180deg);
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  font-size: 14px;

  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px;
}

.content {
  max-width: 500px;
  text-align: center;
  line-height: 1.8;
}

.wrapper.zoomed {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
}

.wrapper.zoomed .scene {
  width: 600px;
  height: 420px;
}

.wrapper.zoomed .letter {
  font-size: 24px;
  padding: 30px;
}

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(4px);
  z-index: 999;
}

@media (max-width: 768px) {

  .wrapper.zoomed {
    width: 90vw;
    max-height: 85vh;        /* 🔥 giới hạn theo màn hình */
  }

  .wrapper.zoomed .scene {
    width: 100%;
    height: 100%;
  }

  .wrapper.zoomed .back {
    display: block;                 /* 🔥 bỏ flex */
    padding: 20px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

}
</style>
</head>

<body>

<h2>🎉 新年给你写的信~ 🎉</h2>

<div class="grid" id="grid"></div>

<script>
const titles = [
  "🍀",
  "🍀",
  "🍀",
  "🍀",
  "🍀",
  "🍀",
  "🍀",
  "🍀",
  "🍀"
];

const messages = [
  "🎉 新的一年，愿你工作顺利，努力都有回报。项目顺顺利利📊，领导少点挑剔，同事多点靠谱🤝。工资涨得比压力快💰，存款涨得比年纪快，奖金、机会、好运<strong>等</strong>好事都慢慢向你靠近✨。下班后有生活，周末有放松🌿，忙碌里也能找到自己的节奏。要是偶尔心累，也别硬撑，记得还有朋友可以一起吐槽🙂。新的一年，继续稳稳地往前走！🎉",
  "💖 谢谢你一直愿意和我分享你的生活、感受和想法。因为有你，<strong>我</strong>学到了很多有趣的东西，也看到<strong>了</strong>不同的世界, 不同的看法🌍。谢谢你让我了解你的习惯、爱好，还有那些开心或难过的时刻。能被你信任、听你分享，我真的很珍惜。希望以后我们还能继续彼此陪伴，一起成长，一起发现更多美好的事情。💖",
  "🌟 愿你付款的时候，手比脑子快一点；银行卡余额，永远比烦恼多一个零；月底看账单的时候，心跳保持<strong>正</strong>常。“加入购物车”只是一个形式🛒，“立即购买”才是态度🔥 =)))) 🌟",
  "🍀 愿好运不期而遇，惊喜如约而至🎁。希望那些你默默坚持的时刻，都会在未来某一天变成回报。也许生活不会一下子变得完美🌤️，但<strong>别</strong>因为一时的疲惫就怀疑自己。愿好运总能在不经意的时候出现，给你一点底气💪，也给你一点温柔。🍀",
  "🌿 亲爱的朋友💛，祝你每天都充满阳光和笑容，所有的努力都有回报，所有的梦想都能实现。无论遇到什么困难⛰️，都希望你勇敢坚定，我也会一直在你身边支持你。祝你身体健康🩺，万事顺心，再成熟，<strong>再</strong>从容一点，幸福快乐每一天。🌿",
  "✨ 不知道你有没有注意到，其实我一直叫你“灯总”，而不是“邓总”。因为在我心里，你就像一盏灯。经历了那么多困难和压力，自<strong>始</strong>至终，你依然在为自己发光，没有被现实打倒。你不是为了照亮别人，而是一直在努力照亮自己的人生。2026年，希望你依然是一盏明亮的灯✨。前面的路也许还有风雨和荆棘🌧️🌙，但我相信，就算在黑暗里，你也一定能找到属于自己的出路。✨",
  "💙 认识你这一年，也不能说我到底有多了解你。但从你跟我分享的那些事情里，我觉得你是一个一直很努力、有立场、有自己想法的人，而且在很多对这个世界的看法上，我们其实挺一致的（ 🙂 这些话我好像也说过很多次了）。当然，有时候我们还是会有不同意见，但我觉得那反而让我们更了解彼此🤝。我承认，我对你也是有感情的，你可能早就猜到了，或者多少感觉到一点。之前我也提过，只是表达得可能，对你来说，不够清楚吧。我不是那种很有“女生味”的人。我不知道，也不太会说那些甜言蜜语、也不是会撒娇、装可爱的类型，有时候也会有点幼稚，会无理取闹地闹脾气，不太分对错; 性格比较理性一点🧠，说话虽然是真心的，但有时候可能会，或者已经让你觉得受伤。说到这里才发现，自己在感情方面其实有不少缺点，真的挺难让别人喜欢的 哈哈哈 =))))。我认为，我情感的价值更多体现在别的方面，比如一起分享各自的兴趣🎧，一起做事情📚，一起聊生活里的烦恼和压力等等。哎~ 写这些的时候我在想想，如果以后还能继续和你并肩走下去🚶‍♀️🚶‍♂️，一起工作，或者一起讨论更多事情，其实会很好。以前我跟你说过，我希望有一段认真的关系，所以总是会前后考虑很多，担心以后的未来，希望一切都有比较清晰的计划 📖。但有时候我又会想，生活不可能永远按照自己的安排来走，变故还是会发生。那我是不是有点太勉强自己了？当然，我不再想那么多了，并不代表我会对自己的决定变得随便哦。大家常说，走一步算一步 🚶‍♀️。而且在感情这方面，我也不想自欺，委屈自己。我知道，哪有什么路是完全没有困难的，但我觉得我<strong>们</strong>可以试着一起面对，一起去找出路。我选择相信你，也就是相信自己。几个月前，你也提过这件事了，说你有多难受、多不开心。对不起，让你等太久了。💙",
  "💭 快认识一年了⏳。这一年里有<strong>开</strong>心的时候，也有不开心的时候；有很合拍的时候，也有吵到差点想“拉黑”对方的时候 😂 不过最后还是会好好说话，继续做朋友🤝。还好你对我挺有耐心，不然换成别人可能早就不理我了。谢谢你愿意听我说那些乱七八糟的事情。因为这样，我更了解你，也更了解自己一点。一年不算很长，但也不短。至少让我觉得——嗯，认识你还是值得的✨。以后就算吵架，也吵轻一点<strong>吧</strong> :v",
  "✨ 愿新的一年，你能多一点属于自己的时间。愿你多去看看这个世界，多去走走不同的城市和风景🏙️🏞️。不只是为<strong>了</strong>放松，而是为了遇见更大的世界，也遇见更好的自己。愿你在奔波中找到自由🕊️，在旅途中找到答案🧭。在忙碌之外，也能慢下来，好好生活🌿，过一种属于自己节奏<strong>式</strong>的日子。✨"
];

const grid = document.getElementById("grid");

for (let i = 0; i < 9; i++) {

  const wrapper = document.createElement("div");
  wrapper.className = "wrapper";

  const scene = document.createElement("div");
  scene.className = "scene";

  const envelope = document.createElement("div");
  envelope.className = "envelope";

  envelope.innerHTML = `
    <div class="front">${titles[i]}</div>
    <div class="back">
  <div class="content">
    ${messages[i]}
  </div>
</div>
  `;

  envelope.onclick = () => {

  if (wrapper.classList.contains("zoomed")) return;

  envelope.classList.add("open");
  wrapper.classList.add("zoomed");
  wrapper.style.animation = "none";

  const overlay = document.createElement("div");
  overlay.className = "overlay";
  document.body.appendChild(overlay);

  overlay.onclick = () => {

  // đóng trước
  envelope.classList.remove("open");

  // chờ flip xong rồi mới bỏ zoom
  setTimeout(() => {
    wrapper.classList.remove("zoomed");
    wrapper.style.animation = "shake 0.6s infinite ease-in-out";
    overlay.remove();
  }, 600); // phải khớp với transition 0.6s
};

};


  scene.appendChild(envelope);
  wrapper.appendChild(scene);
  grid.appendChild(wrapper);
}
</script>

</body>
</html>